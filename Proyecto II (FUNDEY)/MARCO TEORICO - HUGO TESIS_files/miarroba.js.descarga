var isMobileBrowser=(function(a){return(/android.+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))})(navigator.userAgent||navigator.vendor||window.opera);var
DOM_MIARROBA='https://miarroba.com',DOM_SERVICIOS='https://servicios.miarroba.com',_PICS_URL='https://miarroba.st/203',_ICO_URL='https://miarroba.st/203/iconos',_LAYOUT_URL='https://miarroba.st/203/layout_miarroba',_VACIO_URL='https://miarroba.st/203/iconos/vacio.gif',_JS_URL='https://miarroba.st/203/javascr'+'ipt',_JQ_URL='https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js',_JS_ORIG='',_JS_LNG_URL='https://miarroba.st/203/javascr'+'ipt/es',_CSS_URL='https://miarroba.st/203/css',_LANG_CODE='es',_PASSWORD_STRENGTH=['muy débil','débil','normal','fuerte','muy fuerte'],ICONOSXP_128='https://miarroba.st/203/iconos_xp/128x128',ICONOSXP_48='https://miarroba.st/203/iconos_xp/48x48',ICONOSXP_32='https://miarroba.st/203/iconos_xp/32x32',ICONOSXP_24='https://miarroba.st/203/iconos_xp/24x24',ICONOSXP_16='https://miarroba.st/203/iconos_xp/16x16',_C_DECIMALES=',',_C_MILES='.',_SAFE_FONTS=[''],KEY_BACKSPACE=8,KEY_TAB=9,KEY_RETURN=13,KEY_ESC=27,KEY_LEFT=37,KEY_UP=38,KEY_RIGHT=39,KEY_DOWN=40,KEY_DELETE=46,KEY_HOME=36,KEY_END=35,KEY_PAGEUP=33,KEY_PAGEDOWN=34,KEY_INSERT=45,KEY_COMA=188,LNG_ACEPTAR='Aceptar',LNG_CANCELAR='Cancelar',LNG_TRANSPARENTE='Transparente',LNG_VALID_EXTENSIONS='Puedes subir archivos #{exts}',LNG_VALID_WEIGHT='El peso máximo permitido es de #{bytes}',LNG_MAX_WIDTH='El ancho máximo es de #{pixeles} píxeles',LNG_MAX_HEIGHT='El alto máximo es de #{pixeles} píxeles',LNG_MIN_WIDTH='El ancho mínimo es de #{pixeles} píxeles',LNG_MIN_HEIGHT='El alto mínimo es de #{pixeles} píxeles',LNG_EXACT_WIDTH='El ancho máximo es de #{pixeles} píxeles',LNG_EXACT_HEIGHT='El alto máximo es de #{pixeles} píxeles',LNG_RANGE_WIDTH='El ancho debe estar comprendido entre #{ancho} y #{Ancho} píxeles',LNG_RANGE_HEIGHT='El alto debe estar comprendido entre #{alto} y #{Alto} píxeles',LNG_MAX_RESOLUTION='La resolución máxima permitida es de #{ancho}x#{alto} píxeles o equivalente',LNG_MIN_RESOLUTION='La resolución mínima permitida es de #{ancho}x#{alto} píxeles o equivalente',LNG_EXACT_RESOLUTION='La resolución ha de ser de #{ancho}X#{alto} píxeles;',LNG_RANGE_RESOLUTION='La resolución de la imagen ha de estar comprendida entre #{ancho}X#{alto} y #{Ancho}X#{Alto} píxeles.',LNG_OR='O',LNG_SELECCIONAR_UNA_IMAGEN_DE='Seleccionar una <br />imagen de:',LNG_O_BIEN_SELECCIONAR='O bien, seleccionar:',LNG_LINK_FROMPC='Mi PC',LNG_TITLE_FROMPC='Subir una imagen tuya',LNG_EXPLAIN_1_FROMPC='Selecciona una imagen de tu PC. Si es correcta, la imagen será subida a tu espacio y obtendrás una vista previa aquí.<br />Las imágenes de gran tamaño pueden tardar en aparecer',LNG_LINK_FROMEXT='Importar desde Web',LNG_TITLE_FROMEXT='Importar desde dirección web (URL)',LNG_URL_IMAGEN='URL de imagen',LNG_EXPLAIN_1_FROMEXT='Escribe la URL de imagen en el campo de texto anterior. Si es correcta, la imagen será importada desde la url de origen a tu espacio y obtendrás una vista previa aquí.<br />Las imágenes de gran tamaño pueden tardar en aparecer',LNG_LINK_FROMURL='Dirección web (URL)',LNG_TITLE_FROMURL='Especificar una URL de imagen',LNG_URL_IMAGEN='URL de imagen',LNG_EXPLAIN_1_FROMURL='Escribe la URL de imagen en el campo de texto anterior. Si es correcto, obtendrás una vista previa de la imagen aquí<br />Las imágenes de gran tamaño pueden tardar en aparecer',LNG_LINK_FROMSINIMAGEN='Ninguna imagen',LNG_TITLE_FROMSINIMAGEN='Ninguna imagen',LNG_EXPLAIN_1_FROMSINIMAGEN='No usar imagen en este apartado.',LNG_LINK_FROMDEFECTO='Imagen por defecto',LNG_EXPLAIN_1_FROMDEFECTO='Usar imagen por defecto: #{defaultCode}',LNG_TITLE_FROMDEFECTO='Usar imagen por defecto',LNG_NOW='Ahora',LNG_HECHO='Hecho',LNG_TIME='Hora',LNG_HOUR='Hora',LNG_HOURS='Horas',LNG_MINUTE='Minuto',LNG_MINUTES='Minutos',LNG_SECOND='Segundo',LNG_SECONDS='Segundos',LNG_ANO='Año',LNG_MES='Mes',LNG_SEMANA='Semana',LNG_DIA='Día',LNG_CHOOSE_TIME='Elige hora',LNG_TODAS_LAS_FECHAS='Todas las fechas',LNG_ZONA_HORARIA='Zona horaria',LNG_ESTO_PODRIA_LLEVAR_ALGO_DE_TIEMPO='Esto podría llevar algo de tiempo...',LNG_HACE_X_TIEMPO='Hace #{tiempo}';(function(window){window.getDevicePixelRatio=function(){var ratio=1;if(window.screen.systemXDPI!==undefined&&window.screen.logicalXDPI!==undefined&&window.screen.systemXDPI>window.screen.logicalXDPI){ratio=window.screen.systemXDPI/window.screen.logicalXDPI;}
else if(window.devicePixelRatio!==undefined){ratio=window.devicePixelRatio;}
return ratio;};})(this);jQuery.extend({tpl:function(tpl,val){tpl=typeof(tpl)=='string'?tpl:'';val=jQuery.isPlainObject(val)?val:{};return tpl.replace(/#\{([^{}]+)}/g,function(c,m){return val[m]||'';});},keys:function(obj){var a=[];jQuery.each(obj,function(i,v){a.push(i);});return a;},values:function(obj){var a=[];jQuery.each(obj,function(i,v){a.push(v)});return a;},idCounter:0,identify:function(o){return(typeof(o)=='string'&&o.substr(0,1)!='#'&&jQuery.trim(o)!='')?jQuery('#'+o):jQuery(o)},htmlspecialchars:function(string){return jQuery('<span>').text(string).html();},strPad:function(i,l,s){var o=i.toString();l=(l||2);s=(s||'0');while(o.length<l){o=s+o;}
return o;},toQueryParams:function(str){var ret={};str.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(a,b,c,d){ret[decodeURIComponent(b.replace(/\+/g,' '))]=decodeURIComponent((d||'').replace(/\+/g,' '));});return ret;}});jQuery.fn['identify']=function(){if(this[0]){var id=jQuery.attr(this[0],'id');if(!id){do{id='jQuery_anonymous_element_'+(++jQuery.idCounter)}while(jQuery('#'+id).length!=0);jQuery.attr(this[0],'id',id);}}else{id=null;}
return id;}
jQuery.fn['scrollTo']=function(){this[0].scrollIntoView(true);}
if(jQuery.browser.msie&&jQuery.browser.version<=8){jQuery.fx.interval=40;}
jQuery.fn.extend({mousehold:function(timeout,f){if(timeout&&typeof timeout=='function'){f=timeout;timeout=150;}
if(f&&typeof f=='function'){return this.each(function(){var timer=0;var fireStep=0;jQuery(this).mousedown(function(e){fireStep=1;var t=this;timer=setInterval(function(){f.call(t,e);fireStep=2;},timeout);})
clearMousehold=function(e){clearInterval(timer);if(fireStep==1)f.call(this,e);fireStep=0;}
jQuery(this).mouseout(clearMousehold);jQuery(this).mouseup(clearMousehold);})}},mousewheel:function(up,down,preventDefault){return this.hover(function(){jQuery.event.mousewheel.giveFocus(this,up,down,preventDefault);},function(){jQuery.event.mousewheel.removeFocus(this);});},mousewheeldown:function(fn,preventDefault){return this.mousewheel(function(){},fn,preventDefault);},mousewheelup:function(fn,preventDefault){return this.mousewheel(fn,function(){},preventDefault);},unmousewheel:function(){return this.each(function(){jQuery(this).off('mouseover mouseout');jQuery.event.mousewheel.removeFocus(this);});},unmousewheeldown:jQuery.fn.unmousewheel,unmousewheelup:jQuery.fn.unmousewheel});jQuery.event.mousewheel={giveFocus:function(el,up,down,preventDefault){if(el._handleMousewheel)jQuery(el).unmousewheel();if(preventDefault==window.undefined&&down&&down.constructor!=Function){preventDefault=down;down=null;}
el._handleMousewheel=function(event){if(!event)event=window.event;if(preventDefault)
if(event.preventDefault)event.preventDefault();var delta=0;if(event.wheelDelta){delta=event.wheelDelta/120;if(window.opera)delta=-delta;}else if(event.detail){delta=-event.detail/3;}
if(up&&(delta>0||!down))
up.apply(el,[event,delta]);else if(down&&delta<0)
down.apply(el,[event,delta]);};if(window.addEventListener)
window.addEventListener('DOMMouseScroll',el._handleMousewheel,false);window.onmousewheel=document.onmousewheel=el._handleMousewheel;},removeFocus:function(el){if(!el._handleMousewheel)return;if(window.removeEventListener)
window.removeEventListener('DOMMouseScroll',el._handleMousewheel,false);window.onmousewheel=document.onmousewheel=null;el._handleMousewheel=null;}};if(typeof($.ui)!='undefined'){$.widget("ui.autocompleteM",$.extend({},$.ui.autocomplete.prototype,{_renderItem:function(ul,item){return $("<li></li>").data("item.autocomplete",item).append($("<a></a>").html(item.label)).appendTo(ul);}}));var oldHTML=$.datepicker._generateHTML;$.extend($.datepicker,{_generateHTML:function(inst){var html=oldHTML.apply(this,arguments);if(typeof(inst.settings.showAllDates)!='undefined'&&inst.settings.showAllDates===true){var dummyDiv=jQuery('<div style="display:none">'+html+'</div>').appendTo('body');var button=jQuery('<button type="button" class="ui-datepicker-void ui-state-default ui-priority-primary ui-corner-all" onclick="jQuery(\'#'+inst.id+'\').datepicker(\'hide\');jQuery(\'#'+inst.id+'\').val(\'\');jQuery(\'#'+inst.id+'\').change();">'+LNG_TODAS_LAS_FECHAS+'</button>');jQuery('.ui-datepicker-close',dummyDiv).after(button);html=dummyDiv.html();dummyDiv.remove();}
return html;}});}
var $mia=new function(){var t=this;this.antiFrame=function(){if(window.self!=window.top){window.top.location=window.self.location;}}
this.fblogin=function(url){var newWindow=$mia.openPopup(url,'mia_fb_login',640,350);if(newWindow){var checkStatus=setInterval(function(){if(newWindow.closed){clearInterval(checkStatus);location.reload();}},75);}}
this.openPopup=function(url,name,width,height){return window.open(url,name,'width='+width+',height='+height+',top='+((screen.height-height)/2)+',left='+((screen.width-width)/2));}
this.navigation=function(nav){if(typeof(nav)=='undefined'){nav=[];}
var foo=jQuery('<div/>').html('<a href="https://miarroba.com" class="inicio" title="Inicio"><img src="'+_PICS_URL+'/layout_miarroba/header/icon_home.gif" title="Inicio" alt="home"></a>');jQuery.each(nav,function(i,el){var text=el.text;delete el.text;foo.append('<span>&nbsp;</span>');foo.append(jQuery('<a/>').html(text).attr(el))});jQuery('a',foo).last().addClass('selected');jQuery('#miarroba_navigation').empty().append(foo);};this.sumCSS=function(ob,op){var s=0;jQuery.each(op,function(k,v){s+=parseInt(ob.css(v),10)||0;});return s;}
this.videoLayout=function(where,now){if(typeof(now)=='undefined'||now!==true){jQuery(function(){$mia.videoLayout(where,true);});return;}
$(where).find('iframe, embed').each(function(){var ifr=$(this);var rel=$(this).attr('rel');if((match=youtubeLinkParser(rel))){var w=ifr.width();var pW=90*w/480;var pH=63*w/480;ifr.replaceWith('<a class="youtubelayer" title="Haz click para ver el video" target="blank" href="'+rel+'" data-youtube="'+match+'"  style="width:'+w+'px;" ><img class="caretoMia" src="https://i.ytimg.com/vi/'+match+'/hqdefault.jpg"><span style="margin-top:-'+(pH/2)+'px;margin-left:-'+(pW/2)+'px;width:'+pW+'px;height:'+pH+'px;"><img src="https://miarroba.st/203/youtube.png"></span></a>');}});$("body").on("click","a[data-youtube]",function(){var a=$(this);$.ajax({url:'/youtube',data:'v='+a.data('youtube'),type:'POST',dataType:'json',success:function(r){}});var img=a.find('img');var layer=$('<div class="overlay"><div class="overlay-margin"><div class="modal-window"><span>x</span><div class="video-container"><iframe class="youtube" src="https://www.youtube.com/embed/'+a.data('youtube')+'?autohide=1&rsel=0&rel=0&showinfo=0&autoplay=1" frameborder="0" allowfullscreen></iframe></div></div></div></div>');layer.click(function(){layer.remove();});layer.find('span').click(function(){layer.remove();});var onEscLayerRemove=function(e){if(e.which==KEY_ESC){layer.remove();$(document).off('keydown',onEscLayerRemove);}};$(document).on('keydown',onEscLayerRemove);$("body").append(layer);layer.show();return false;});function youtubeLinkParser(url){var regExp=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=|\?v=)([^#\&\?]*).*/;var match=url.match(regExp);if(match&&match[2].length==11){return match[2];}else{return null;}}}
this.maxObjSize=function(where,maxWidth,now){if(typeof(where)=='undefined'||typeof(maxWidth)!='number'){return false;}
if(typeof(now)=='undefined'||now!==true){jQuery(function(){$mia.maxObjSize(where,maxWidth,true);});return;}
jQuery.each(jQuery.makeArray(where),function(i,v){var pUntil=typeof(v)=='string'?v:'#'+jQuery(v).identify;jQuery('img:not(.caretoMia),embed,iframe',jQuery(v)).each(function(){var o=jQuery(this);var W=o.width(),H=o.height();var toSum=['borderLeftWidth','borderRightWidth','paddingLeft','paddingRight'];if(this.style.marginLeft!='auto')toSum.push('marginLeft');if(this.style.marginRight!='auto')toSum.push('marginRight');var max=maxWidth-($mia.sumCSS(o,toSum));o.parentsUntil(pUntil).each(function(){var p=jQuery(this);max-=(p.outerWidth(true)-p.width());});if(W>max){o.css({'width':'','height':''}).attr('width',max);if(H!=0){o.attr('height',(H*(max/W)));}}else{o.css('maxWidth',max+'px');}
if(this.tagName=='IMG'&&o.parent('a').length==0){var img=jQuery('<img/>');img.load(function(){if(this.width>max){var layer=jQuery('<div/>');var position=function(){var pos=o.position();var left=pos.left+$mia.sumCSS(o,['marginLeft']);var top=pos.top+$mia.sumCSS(o,['marginTop']);layer.css({width:o.outerWidth()+'px',height:o.outerHeight()+'px',top:top+'px',left:left+'px'});}
layer.attr({title:'Ver imagen en tamaño completo'}).css({position:'absolute',cursor:'pointer',margin:'0px',padding:'0px',border:'0px',opacity:0.6}).css({background:'url('+_PICS_URL+'/layout_miarroba/icons/misc/expand.gif) center center no-repeat'}).click(function(){window.open(o.attr('src'))}).mouseleave(function(){jQuery(this).detach();});jQuery(window).bind('resize',position);o.mouseenter(function(){position();layer.insertAfter(o);});}
delete img;}).error(function(){delete img;}).attr('src',o.attr('src'));}});});return true;}
this.menuInObj=function(obj,ani,contStyle,move){var t=this,i=jQuery(obj),ani,W,H,P;t.layer=jQuery('<div/>');t.last='ini';if(typeof(move)!='number'){move=false;}
t.init=function(){W=i.width();H=i.height();t.layer.css({position:'absolute',width:W+'px',height:H+'px',overflow:'hidden',backgroundImage:'url('+_VACIO_URL+')'});if(move===false){t.layer.insertAfter(i).bind('mouseenter',{t:'end'},t.animate).bind('mouseleave',{t:'ini'},t.animate);}else{t.layer.insertAfter(i).one('mousemove',{t:'end'},t.animate);}
jQuery.each(ani,function(i,v){var foo=t.createContainer(contStyle).html(v[0]).data('ini',v[1]).data('end',v[2]).hide().appendTo(t.layer);foo.css(t.posData(foo,'ini')).show();});ani=t.layer.children();t.position();jQuery(window).bind('resize',t.position);}
t.animate=function(e){t.last=e.data['t'];switch(e.type){case 'mousemove':var toBack;var foo=function(){t.layer.unbind('mousemove');t.animate({data:{t:'ini'},type:'stop'})}
toBack=setTimeout(foo,move);t.layer.mousemove(function(){clearTimeout(toBack);toBack=setTimeout(foo,move);});ani.mouseenter(function(){clearTimeout(toBack);t.layer.unbind('mousemove');}).mouseleave(function(){toBack=setTimeout(foo,move);t.layer.mousemove(function(){clearTimeout(toBack);toBack=setTimeout(foo,move);});});break;case 'stop':t.layer.one('mousemove',{t:'end'},t.animate);break;}
ani.stop(true).queue(function(next){var o=jQuery(this);o.animate(t.posData(o,e.data['t']),{duration:300,queue:false});next();}).dequeue();return false;}
t.posData=function(obj,type){var d={};d.width=obj.outerWidth(true);d.height=obj.outerHeight(true);d.layerWidth=W;d.layerHeight=H;d.center=((d.layerWidth-d.width)/2);d.middle=((d.layerHeight-d.height)/2);return obj.data(type)(d);}
t.createContainer=function(extra){var c=jQuery('<div/>').css({position:'absolute'});if(typeof(extra)=='object'){c.css(extra);}
return c;}
t.position=function(){P=i.position();W=i.width();H=i.height();var dT=$mia.sumCSS(i,['marginTop','paddingTop','borderTopWidth']);var dL=$mia.sumCSS(i,['marginLeft','paddingLeft','borderLeftWidth']);t.layer.css({width:W+'px',height:H+'px',top:(P.top+dT)+'px',left:(P.left+dL)+'px'});ani.each(function(){var ob=jQuery(this);ob.css(t.posData(ob,t.last))});}
t.destroy=function(){jQuery(window).unbind('resize',t.position);ani.stop(true);t.layer.remove();delete t;}
jQuery(t.init);}
this.galleryMenu=function(elements,input,viewUrl,showUse){if(typeof(showUse)=='undefined'||showUse!==true)showUse=false;var style={opacity:0.8,width:60,height:60,cursor:'pointer'};var enter=function(){jQuery(this).css({opacity:1})};var leave=function(){jQuery(this).css({opacity:0.8})};jQuery(function(){jQuery(elements).each(function(){var o=jQuery(this);var data=o.attr('rel');var view=function(){window.open(jQuery.tpl(viewUrl,{data:data}))};var use=function(){if(confirm('¿Deseas cambiar realmente de plantilla?'))jQuery(input).val(data).parent('form').submit();}
var menus=[];if(!showUse){menus.push([jQuery('<div/>').attr({'title':'Utilizar piel'}).css(style).css({'background':'url('+_PICS_URL+'/layout_miarroba/icons/misc/install.png) no-repeat'}).hover(enter,leave).click(use),function(d){return{left:'-'+(d.width+10)+'px',top:d.middle+'px'}},function(d){return{left:((d.layerWidth/2)-d.width-10)+'px'}}]);}
menus.push([jQuery('<div/>').attr({'title':'Ver ejemplo'}).css(style).css({'background':'url('+_PICS_URL+'/layout_miarroba/icons/misc/view.png) no-repeat'}).hover(enter,leave).click(view),function(d){return{right:'-'+(d.width+10)+'px',top:d.middle+'px'}},function(d){return(!showUse)?{right:((d.layerWidth/2)-d.width-10)+'px'}:{right:d.center+'px'}}])
new $mia.menuInObj(o,menus);});})}
this.getPagination=function(pag,total,returnFunc){var cod=[],mod,ini,fin,x,link,nolink,selected;pag=parseInt(pag);total=parseInt(total);if(total>1){mod=!isMobileBrowser?2:1;ini=1;fin=total;if(((mod*2)+1)<total){if((pag-mod)<2){ini=1;fin=ini+(mod*2);}else{ini=pag-mod;fin=pag+mod;if(fin>total){ini=ini-(fin-total);fin=total;if(ini<1)ini=1;}}}
link=function(params){return jQuery.tpl(t.mask.pagLink,params)};nolink=function(params){return jQuery.tpl(t.mask.pagNoLink,params)};selected=function(params){return jQuery.tpl(t.mask.pagSelected,params)};cod.push(t.condition((ini>1),link,nolink,{'type':'First','title':'Primera página','text':'&lt;&lt;','click':returnFunc,'pag':'1'}));cod.push(t.condition((pag>1),link,nolink,{'type':'Prev','title':'Página anterior','text':'&lt;','click':returnFunc,'pag':(pag-1)}));for(x=ini;x<=fin;x++){cod.push(t.condition((x!=pag),link,selected,{'type':'Number','title':'Página: '+x,'text':x,'click':returnFunc,'pag':x}));}
cod.push(t.condition((pag<fin),link,nolink,{'type':'Next','title':'Página siguiente','text':'&gt;','click':returnFunc,'pag':(pag+1)}));cod.push(t.condition((fin<total),link,nolink,{'type':'Last','title':'Última página','text':'&gt;&gt;','click':returnFunc,'pag':total}));}
return jQuery.tpl(t.mask.pagBase,{'content':cod.join(t.mask.pagSep)});};this.condition=function(cond,ok,fail,params){return cond?ok(params):fail(params);};this.hexFromTo=function(Num,Hex1,Hex2){var Partes1=t.hex2RGB(Hex1);var Partes2=t.hex2RGB(Hex2);var SumR=(Partes2[0]-Partes1[0])/(Num-1);var SumG=(Partes2[1]-Partes1[1])/(Num-1);var SumB=(Partes2[2]-Partes1[2])/(Num-1);var ArrayReturn=new Array();ArrayReturn[0]=Hex1;for(x=1;x<(Num-1);x++){Partes1[0]+=SumR;Partes1[1]+=SumG;Partes1[2]+=SumB;ArrayReturn[x]=t.RGB2Hex(Math.round(Partes1[0]),Math.round(Partes1[1]),Math.round(Partes1[2]));}
ArrayReturn[(Num-1)]=Hex2;return ArrayReturn;};this.hex2RGB=function(hex){if(typeof(hex)=='string'){hex=parseInt(hex.replace('#',''),16);}
return[hex>>16,(hex&0x00FF00)>>8,(hex&0x0000FF)];};this.RGB2Hex=function(R,G,B){if(typeof(R)=='object'&&!G&&!B){G=R[1];B=R[2];R=R[0];}
return t.dec2Hex(R)+t.dec2Hex(G)+t.dec2Hex(B);};this.dec2Hex=function(Dec){var hexchars="0123456789ABCDEF";Dec=Dec||0;Dec=parseInt(Dec,10);if(isNaN(Dec))Dec=0;Dec=Math.round(Math.min(Math.max(0,Dec),255));return hexchars.charAt((Dec-Dec%16)/16)+hexchars.charAt(Dec%16);};this.contrastColor=function(color){if(typeof(color)!='string'){color=$mia.RGB2Hex(color[0],color[1],color[2]);}
if($mia.toYCbCr(color)['Y']<128){return $mia.hex2RGB($mia.hexFromTo(5,color,'FFFFFF')[3]);}else{return $mia.hex2RGB($mia.hexFromTo(5,color,'000000')[3]);}};this.toYCbCr=function(color){if(typeof(color)=='string'){color=$mia.hex2RGB(color);}
return{'Y':(color[0]*0.257)+(color[1]*0.504)+(color[2]*0.098)+16,'Cb':(-0.148*color[0])-(0.291*color[1])+(0.439*color[2])+128,'Cr':(0.439*color[0])-(0.368*color[1])-(0.071*color[2])+128}};this.rgb2hsv=function(rgb){var r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255;var max=Math.max(r,g,b),min=Math.min(r,g,b);var h,s,v=max;var d=max-min;s=max==0?0:d/max;if(max==min){h=0;}else{switch(max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4;break;}
h/=6;}
return[h,s,v];};this.hsv2rgb=function(hsv){var
h=hsv[0],s=hsv[1],v=hsv[2],r,g,b,i=Math.floor(h*6),f=h*6-i,p=v*(1-s),q=v*(1-f*s),t=v*(1-(1-f)*s);switch(i%6){case 0:r=v,g=t,b=p;break;case 1:r=q,g=v,b=p;break;case 2:r=p,g=v,b=t;break;case 3:r=p,g=q,b=v;break;case 4:r=t,g=p,b=v;break;default:r=v,g=p,b=q;break;}
return[Math.round(r*255),Math.round(g*255),Math.round(b*255)];};this.hex2hsv=function(hex){return $mia.rgb2hsv($mia.hex2RGB(hex));};this.hsv2hex=function(hsv){return $mia.RGB2Hex($mia.hsv2rgb(hsv));};this.changeLuminance=function(color,dif){if(typeof(color)=='string'){color=$mia.hex2RGB(color);}
var colores={'R':color[0],'G':color[1],'B':color[2]};var lum=$mia.toYCbCr(color);lum.Y+=dif;colores['R']=1.164*(lum.Y-16)+1.596*(lum.Cr-128);colores['G']=1.164*(lum.Y-16)-0.813*(lum.Cr-128)-0.392*(lum.Cb-128);colores['B']=1.164*(lum.Y-16)+2.017*(lum.Cb-128);return jQuery.values(colores);};this.mask={popup:'<table cellpadding="0" cellspacing="0" border="0" class="mWin">'
+'<tr class="tb"><td class="lr clt"></td><td class="grey"></td><td class="lr crt"></td></tr>'
+'<tr><td class="lr grey"></td><td class="grey">'
+'<div style="position:relative;"><img id="imgClosePop" style="display:none;" title="Cerrar" src="'+_VACIO_URL+'" onclick="#{accClose}"/>#{content}</div>'
+'</td><td class="lr grey"></td></tr>'
+'<tr class="tb"><td class="lr clb"></td><td class="grey"></td><td class="lr crb"></td></tr>'
+'</table>',pagBase:'#{content}',pagSep:'<span class="paginationSeparation" style="height:24px;"></span>',pagLink:'<a onclick="#{click}(#{pag})" class="paginationItem pagination#{type} noOutline"><span title="#{title}">#{text}</span></a>',pagNoLink:'<span class="paginationItem pagination#{type} paginationDisabled"><span title="#{title}">#{text}</span></span>',pagSelected:'<b class="paginationItem paginationSelected"><span title="#{title}">#{text}</span></b>'};this.tabs=function(bossMenu){var t=this;t.tabChange=function(tabId){if(typeof(tabId)=='string'){tabId='#'+tabId;}
jQuery(tabId,t.bossMenu).addClass('selected').siblings().removeClass('selected').filter('.multitab').each(function(){var a=jQuery(this);a.find('span.dataSelector').children().html(a.data('reset'));});}
jQuery(function(){t.bossMenu=jQuery('#'+bossMenu);t.bossMenu.delegate('a:not(.multitab)','click',function(){t.tabChange(this);}).find('a.multitab').each(function(){var a=jQuery(this);var s=jQuery('span.dataSelector',a);var opts=jQuery.parseJSON(s.attr('rel'));a.data('reset',s.children().html());new $mia.optionsMenu('multitab_'+Math.floor(Math.random()*300000000+1),a,opts,'bottom',function(){var opt=jQuery(this);opt.addClass('selected').siblings().removeClass('selected');s.children().html(opt.html());t.tabChange(a);document.location=opt.attr('href');return false;});});});}
this.optionsMenu=function(id,obj,opts,type,callback){var t=this,obj,lay,opt,open=false,disabled=false;type=type||'bottom';callback=jQuery.isFunction(callback)?callback:function(){return true;};obj=jQuery(obj);lay=jQuery('<div class="taSelector" style="display:none;"><div class="taSelectorbody"><div class="optionList"></div></div></div>').attr('id',id).appendTo('body');opt=jQuery('.optionList',lay).delegate('a','click',function(){var ret=jQuery.proxy(callback,this)();t.repos();return ret;});jQuery.each(opts,function(i,v){var text=v.text;delete v.text;opt.append(jQuery('<a>').html(text).attr(v).addClass('option noOutLine'));});t.disable=function(sw){disabled=sw||false;if(disabled&&open){t.hide();}}
t.toggle=function(e){e.preventDefault();if(!disabled){if(open){t.hide(e)}else{jQuery(document).trigger('click.optMenu');t.show(e);}
return false;}}
t.show=function(e){if(!open){open=true;t.repos();lay.slideDown('fast');jQuery(document).bind('click.optMenu',t.hide);jQuery(window).bind('resize',t.repos);}}
t.hide=function(e){if(open){open=false;jQuery(document).unbind('click.optMenu');jQuery(window).unbind('resize',t.repos);lay.slideUp('fast');}}
t.repos=function(e){var coo=obj.offset();switch(type){case 'bottom':coo.top+=obj.outerHeight(true);break;case 'right':coo.left+=obj.outerWidth(true);break;case 'left':coo.left-=lay.outerWidth(true);break;case 'top':coo.top-=lay.outerHeight(true);break;}
lay.css({top:coo.top+'px',left:coo.left+'px',minWidth:obj.width()+'px'});}
obj.css('cursor','pointer').click(t.toggle).find('*').css('cursor','pointer');}
this.fadeElement=function(element,ini,end,duration){var t=this;ini=typeof(ini)=='undefined'?0:ini;end=typeof(end)=='undefined'?1:end;duration=duration|200;var e=jQuery(element).css('opacity',ini).show();if(ini<end){var foo=ini;ini=end;end=foo;}
t.alphaUp=function(){e.queue('fadeElement',[function(){e.animate({opacity:ini},{duration:duration,queue:false});}]).dequeue('fadeElement');}
t.alphaDown=function(){e.queue('fadeElement',[function(){e.animate({opacity:end},{duration:duration,queue:false});}]).dequeue('fadeElement');}}
this.transformTextColor=function(element,iniColor,endColor,duration){var t=this;var e=jQuery((typeof(element)=='string'?'#'+element:element));duration=duration|200;t.up=function(){e.queue('transformTextColor',[function(){e.animate({color:'#'+endColor},{duration:duration,queue:false});}]).dequeue('transformTextColor');}
t.down=function(){e.queue('transformTextColor',[function(){e.animate({color:'#'+iniColor},{duration:duration,queue:false});}]).dequeue('transformTextColor');}}
this.social=new function(){var t=this;var cache={};var sData={fb:{id:'facebook_id',col:'facebook_name',url:DOM_SERVICIOS+'/userinfo.php?callback=?&facebook='}}
var ereg=new RegExp('('+jQuery.keys(sData).join('|')+')@[0-9]+','g');t.query=function(ids,fn){var tQuery={},type,id,num=0;jQuery.each(ids,function(i,v){if(typeof(cache[v])==='undefined'){type=v.substr(0,2);id=v.substr(3);if(typeof(tQuery[type])==='undefined'){tQuery[type]=[];}
if(jQuery.inArray(id,tQuery[type])===-1){tQuery[type].push(id);}}});num=jQuery.keys(tQuery).length;if(num>0){jQuery.each(tQuery,function(type,ids){jQuery.ajax({dataType:'jsonp',timeout:5000,url:sData[type]['url']+encodeURIComponent(ids.join(',')),success:function(d){jQuery.each(d,function(pos,val){cache[type+'@'+val[sData[type]['id']]]=val[sData[type]['col']];});},complete:function(){if(!--num){fn(cache);}}});});}else{fn(cache);}}
t.search=function(text){return(text||'').match(ereg);}
t.parse=function(e){var e=jQuery(e),res,html=[];e.each(function(){html.push(jQuery(this).html());})
if(res=t.search(html.join(' '))){t.query(res,function(){e.each(function(){t.replace(this);})});}}
t.replace=function(e){var childs=e.childNodes,n=childs.length,node;while(n--){node=childs[n];if(node.nodeType==3&&node.nodeValue.search(ereg)!==-1&&jQuery(node).parents('[rel~=no_external_nick]').length==0){node.nodeValue=node.nodeValue.replace(ereg,function(c,type){return cache[c]||c;})}else if(node.nodeType==1){t.replace(node);}}}
jQuery(function(){t.parse('html')});}
this.window=new function(){var t=this,obj=false,cont=false,black=false,fucking=(jQuery.browser.msie&&jQuery.browser.version<=6);if(jQuery('<div/>').css('position','fixed').css('position')!='fixed'){fucking=true;}
t.opened=false;t.open=function(code,backColor,anim,doOnLoad){if(typeof(wbo_close)=='function'){wbo_close();}
backColor=backColor||'#000000';anim=anim||false;doOnLoad=doOnLoad||false;if(obj==false){t.createWindow();}
if(!t.opened){t.opened=true;cont.empty().append(code);jQuery('object,embed,iframe').css({'visibility':'hidden'});if(fucking){jQuery('select').css('visibility','hidden');jQuery(window).bind('scroll.iw resize.iw',function(e){var w=jQuery(this),top=w.scrollTop(),left=w.scrollLeft();obj.css({'top':top+"px",'left':left+"px",width:w.width()+'px',height:w.height()+'px'});black.css({'top':top+"px",'left':left+"px",width:w.width()+'px',height:w.height()+'px'});}).trigger('scroll.iw');}else if(isMobileBrowser){jQuery(window).bind('scroll.iw resize.iw dblclick.iw touchmove.iw',function(e){obj.css({width:black.width()+'px',height:black.height()+'px'});});}
jQuery('body').prepend(black);black.css('background',backColor).animate({'opacity':0.7},(anim?300:0),function(){jQuery('body').prepend(obj);if(doOnLoad){jQuery.isFunction(doOnLoad)?doOnLoad():jQuery.globalEval(doOnLoad);}});}}
t.close=function(){obj.remove();black.css('opacity',0).remove();cont.empty();jQuery('object,embed,iframe').css({'visibility':'visible'});if(fucking){jQuery('select').css('visibility','visible');}
jQuery(window).unbind('scroll.iw resize.iw dblclick.iw touchmove.iw');t.opened=false;}
t.createWindow=function(){obj=jQuery('<table class="infoWindow"><tr><td class="infoWindowContent"></td></tr></table>').css({'zIndex':20001});black=jQuery('<div class="infoWindow"/>').css({'zIndex':20000,'opacity':0}).bind('mousedown',function(event){event.stopPropagation();});cont=jQuery('td',obj);if(fucking){var w=jQuery(window);obj.css({'position':'absolute','width':w.width()+'px','height':w.height()+'px'});black.css({'position':'absolute','width':w.width()+'px','height':w.height()+'px'});}}}
this.lightBox=function(code,anim,close,hideCloseButton){if(!$mia.window.opened){anim=typeof(anim)=='undefined'?true:anim;close=close||'$mia.lightBox.close('+anim+')';if(typeof(close)=='function'){$mia.lightBox.accClose=close;}else{$mia.lightBox.accClose=function(){jQuery.globalEval(close)};}
$mia.lightBox.putStyle();this.window.open(jQuery.tpl(this.mask.popup,{accClose:'$mia.lightBox.accClose()',content:'<div id=\"lightboxAnimation\" style="position:relative;width:32px;height:32px;margin:0px;padding:0px;background:url('+_PICS_URL+'/loading2.gif) center center no-repeat;"></div>'}),'#000000',false,function(){$mia.lightBox.change(code,anim,undefined,hideCloseButton);});}}
this.lightBox.loaded=false;this.lightBox.putStyle=function(){if(typeof($mia.lightBox.css)=='undefined'){var inMia=typeof(MiarrobaToolBar)=='undefined';var css='\n#imgClosePop {width:22px;height:18px;position:absolute;right:5px;top:-18px;cursor:pointer;background:url('+_PICS_URL+'/layout_miarroba/'+((!inMia)?'shadowbox/topclose.png) 0px 0px':'sprites/main.png) -114px -634px')+' no-repeat;}\n'
+'#imgClosePop:hover {background-position: '+((!inMia)?'-22px 0px':'-136px -634px')+';}\n'
+'table.mWin {position: relative;empty-cells: show;}\n'
+'table.mWin .tb {height: 13px;}\n'
+'table.mWin .lr {width: 13px;}\n'
+'table.mWin .grey {background-color: #D7E8FF;}\n'
+'table.mWin .clt, table.mWin .crt, table.mWin .clb, table.mWin .crb {background-image:url('+_PICS_URL+'/layout_miarroba/'+((!inMia)?'shadowbox/esquinas.png':'sprites/main.png')+');background-repeat:no-repeat;}\n'
+'table.mWin .clt {background-position: '+((!inMia)?'0px 0px':'-112px -595px')+';}\n'
+'table.mWin .crt {background-position: '+((!inMia)?'-13px 0px':'-125px -595px')+';}\n'
+'table.mWin .clb {background-position: '+((!inMia)?'0px -13px':'-112px -608px')+';}\n'
+'table.mWin .crb {background-position: '+((!inMia)?'-13px -13px':'-125px -608px')+';}\n'
+'.infoWindow {position:fixed;top:0px;left:0px;width:100%;height:100%;border:0px;margin:0px;padding:0px;}\n'
+'.infoWindowContent {vertical-align: middle;text-align: center;}\n'
+'.infoWindowContent > table {margin-left: auto;margin-right: auto;}\n';jQuery('<style type="text/css">'+css+'</style>').appendTo('head');$mia.lightBox.css=true;}}
this.lightBox.change=function(code,anim,close,hideCloseButton){if($mia.window.opened){anim=typeof(anim)=='undefined'?true:anim;if(typeof(close)!='undefined'){close=close||'$mia.lightBox.close('+anim+')';if(typeof(close)=='function'){$mia.lightBox.accClose=close;}else{$mia.lightBox.accClose=function(){jQuery.globalEval(close)};}}
var o=jQuery('#lightboxAnimation'),c=jQuery('<div/>').css({'position':'absolute','visibility':'hidden'}).append(code),doc=jQuery(document),docW=doc.width(),docH=doc.height();o.stop(true).css({background:'url('+_PICS_URL+'/loading2.gif) center center no-repeat'});jQuery('#imgClosePop').hide();o.empty();var showContent=function(){var doCSS=false,lBW=c.innerWidth(),lBH=c.innerHeight();if(lBW>(docW-100)){lBW=docW-100;lBH+=$mia.scrollbarWidth();doCSS=true;}
if(lBH>(docH-100)){lBH=docH-100;lBW+=$mia.scrollbarWidth();doCSS=true;}
if(doCSS){if(this.tagName=='IFRAME'){jQuery(this).css({width:lBW+'px',height:lBH+'px'}).prop('scrolling','auto');}else{jQuery(this).css({width:lBW+'px',height:lBH+'px',overflow:'auto'});}}
o.animate({'width':lBW+'px'},(anim?250:0)).animate({'height':lBH+'px'},(anim?250:0),function(){c.css({'position':'static','visibility':'visible'});if(!hideCloseButton){jQuery('#imgClosePop').show();jQuery(document).off('keyup.lightboxclose').on('keyup.lightboxclose',function(e){if(e.which===27)jQuery('#imgClosePop').click();});}else{jQuery(document).off('keyup.lightboxclose');}
o.css({background:'',height:'auto'});$mia.lightBox.loaded=true});}
if(c.children().length==1&&c.children('iframe').length==1&&c.children('iframe').attr('src')!=='about:blank'){c.children('iframe').one('load',showContent);o.append(c);}else{o.append(c);jQuery.proxy(showContent,c[0])();}}else{$mia.lightBox(code,anim,close,hideCloseButton);}}
this.lightBox.close=function(anim){if($mia.window.opened){anim=typeof(anim)=='undefined'?true:anim;jQuery(document).off('keyup.lightboxclose');if(anim){jQuery('#imgClosePop').hide();var o=jQuery('#lightboxAnimation');o.stop(true).css({'background':'none','height':o.height()+'px'}).empty().animate({'width':'0px','height':'0px'},300,function(){$mia.window.close();$mia.lightBox.loaded=false;});}else{$mia.window.close()}}}
this.login=function(){top.location="https://miarroba.com/usuarios/login.php";return;if(!isMobileBrowser){$mia.lightBox('<iframe src="https://miarroba.com/usuarios/login.php?return='+encodeURIComponent(location)+'" frameborder="0" width="500" height="350" scrolling="no"></iframe>');}else{top.location='https://miarroba.com/usuarios/login.php?mobile&return='+encodeURIComponent(location);}}
this.ipinfo=function(ip){$mia.lightBox('<iframe src="https://servicios.miarroba.com/ipinfo.php?ip='+encodeURIComponent(ip)+'&popup" frameborder="0" width="750" height="525" scrolling="no"></iframe>');}
this.serializeJSON=function(o){var json={};jQuery.map(jQuery(o).serializeArray(),function(n,i){json[n['name']]=n['value'];});return json;}
this.textBox=function(text,fn,extra,doCancel,fast,hideCloseButton){fn=(typeof(fn)=='function')?fn:function(){};var c=jQuery('<div/>').addClass('confirmBox').append('<div>'+text+'</div>');var fData=jQuery(':input',c);jQuery('<input/>').attr({'type':'button','class':'tabla_boton','value':'Aceptar'}).click(function(){fn(true,extra,$mia.serializeJSON(fData));$mia.lightBox.close(!fast);}).appendTo(c);if(doCancel)jQuery('<input/>').attr({'type':'button','class':'tabla_boton','value':'Cancelar'}).click(function(){fn(false,extra,$mia.serializeJSON(fData));$mia.lightBox.close(!fast);}).appendTo(c);$mia.lightBox.change(c,!fast,function(){fn(false,extra,$mia.serializeJSON(fData));$mia.lightBox.close(!fast);},hideCloseButton);}
this.mmModal=false;this.mmenuModalBox=function(text,fn,extra,doCancel){var t=this;if(t.mmModal===false){t.mmModal=$('<div id="mmModal" class="mmModal" />').appendTo('body');t.mmModal.mmenu({classes:"mm-white mmModal",modal:true,position:'bottom',zposition:'front'});}
t.mmModal.html('<div class="text'+(doCancel?' withCancel':'')+'"><p>'+text+'</p></div>');var bts=$('<div class="bts"></div>').appendTo(t.mmModal);var btsF=$('<div></div>').appendTo(bts);var fData=$(':input',t.mmModal);$('<button />').attr({'type':'button','class':'bt_modal bt_accept'}).html('<span class="fa fa-check"></span> Aceptar').click(function(){setTimeout(function(){fn(true,extra,$mia.serializeJSON(fData));},500);t.mmModal.trigger("close.mm");}).appendTo(btsF);if(doCancel){$('<button />').attr({'type':'button','class':'bt_modal bt_cancel'}).html('<span class="fa fa-times"></span> Cancelar').click(function(){setTimeout(function(){fn(false,extra,$mia.serializeJSON(fData));},500);t.mmModal.trigger("close.mm");}).appendTo(btsF);}
t.mmModal.trigger("open.mm");}
this.confirm=function(text,fn,extra){if(!isMobileBrowser){this.textBox(text,fn,extra,true,true,true);}else{this.mmenuModalBox(text,fn,extra,true);}}
this.alert=function(text,fn,extra){if(!isMobileBrowser){this.textBox(text,fn,extra,false,true,true);}else{this.mmenuModalBox(text,fn,extra,false);}}
this.coregister=function(){jQuery(function(){$mia.lightBox.change('<iframe src="/b05e705195fc4e9cb3d0155b9152841e_coregister.php" style="width:775px;height:500px;" scrolling="no" frameborder="0" id="coregisterIframe"></iframe>');});}
this.scrollbarWidth=function(){if(typeof($mia.scrollbarWidthD)=='undefined'){var temp=jQuery('<div style="width:100px;height:100px;padding:0px;margin:0px;border:0px;overflow:auto;position:absolute;top:-1000px;left:-1000px;"><div style="width:200px;height:200px;overflow:auto"></div></div>').appendTo('body');$mia.scrollbarWidthD=100-parseInt(temp.get(0).clientWidth,10);temp.remove();}
return $mia.scrollbarWidthD;}
this.scrollbarHeight=function(){if(typeof($mia.scrollbarHeightD)=='undefined'){var temp=jQuery('<div style="width:100px;height:100px;padding:0px;margin:0px;border:0px;overflow:auto;position:absolute;top:-1000px;left:-1000px;"><div style="width:200px;height:200px;overflow:auto"></div></div>').appendTo('body');$mia.scrollbarHeightD=100-parseInt(temp.get(0).clientHeight,10);temp.remove();}
return $mia.scrollbarHeightD;}
this.tooltipBox=function(where,code,fb){var active=false;var miaTooltip=jQuery('<div/>').addClass('miaTooltip topTip').css({position:'absolute'}).append(code);var timeout=false;var closeTooltip=function(){if(active!=false){active=false;clearTimeout(timeout);miaTooltip.remove().find('*').stop(true).css({opacity:0});}}
var putTooltip=function(title,obj){miaTooltip.find('.textTip').html(jQuery.htmlspecialchars(title.replace(/\n/g,'[br]')).replace(/\[br\]/g,'<br />'));miaTooltip.find('*').css({opacity:0});if(typeof(fb)=='undefined'||fb!==false){$mia.social.parse(miaTooltip);}
miaTooltip.appendTo('body');var offset=obj.offset();var top=offset.top-miaTooltip.outerHeight();var left=offset.left+(obj.outerWidth()/2)-(miaTooltip.outerWidth()/2);miaTooltip.attr({'class':'miaTooltip topTip'})
if(top<jQuery(window).scrollTop()){top=offset.top+obj.outerHeight();miaTooltip.attr({'class':'miaTooltip bottomTip'});}
if(left<jQuery(window).scrollLeft()){top=offset.top+((obj.outerHeight()-miaTooltip.outerHeight())/2);left=offset.left+obj.outerWidth();miaTooltip.attr({'class':'miaTooltip rightTip'});}else if(left+miaTooltip.outerWidth()>jQuery(window).scrollLeft()+jQuery(window).width()){top=offset.top+((obj.outerHeight()-miaTooltip.outerHeight())/2);left=offset.left-miaTooltip.outerWidth();miaTooltip.attr({'class':'miaTooltip leftTip'});}
miaTooltip.css({top:top,left:left}).find('*').animate({opacity:1},'fast');}
var showTooltip=function(obj){if(obj.identify()!=active){closeTooltip();active=obj.identify();var objTitle=obj.attr('title');if(typeof(objTitle)!='undefined'){objTitle=jQuery.trim(objTitle);if(objTitle==''){obj.removeAttr('miaTooltip');}else{obj.attr('miaTooltip',objTitle);}}else{objTitle=jQuery.trim(obj.attr('miaTooltip'));}
obj.removeAttr('title').removeAttr('alt');if(objTitle!=''){timeout=setTimeout(function(){putTooltip(objTitle,obj)},500);}}}
jQuery(function(){jQuery(where).bind('mouseover.miaTooltips',function(e){var tooltipTarget=jQuery(e.target).closest('[title],[miaTooltip]');if(tooltipTarget.length==1&&tooltipTarget.closest('[rel~=noMiaTooltips]').length==0){showTooltip(tooltipTarget);}else{closeTooltip();}});});}
this.tooltips=function(where,fb){if(!jQuery.browser.msie||jQuery.browser.version>"6.0"){this.tooltipBox(where,'<div class="textTip"></div><div class="corner"><img src="'+_VACIO_URL+'"/></div>',fb);}}
this.prepareHeaderSearch=function(){jQuery(function(){var s=jQuery('#headerSearch');var defValue=jQuery.trim(s.val());var pos=s.offset().left+170;var cursor='auto';var doSearch=function(){var val=jQuery.trim(s.val());if(val!=''&&val!=defValue)document.location='https://buscar.miarroba.com/#!&q='+encodeURIComponent(val);}
s.keydown(function(e){if(e.which==KEY_RETURN)doSearch();}).click(function(e){if(e.pageX>pos)doSearch();}).mousemove(function(e){var cur=(e.pageX>pos)?'pointer':'auto';if(cur!=cursor)s.css({cursor:(cursor=cur)});}).focus(function(){if(s.val()==defValue)s.val('');}).blur(function(){if(jQuery.trim(s.val())=='')s.val(defValue);}).autocomplete({source:function(request,response){var params={site:'',type:'',user:''};var toSuggest=jQuery.trim(request.term.replace(/(\s|^)(site|type|user):([^\s]+)/ig,function(chain,pre,tag,val){tag=tag.toLowerCase();if(params[tag]=='')params[tag]=tag+':'+val+' ';return pre;}).replace(/[\s]+/g,' '));if(toSuggest!=''&&toSuggest!=defValue){jQuery.getJSON('https://suggestqueries.google.com/complete/search?json&client=youtube&ln='+_LANG_CODE+'&callback=?&q='+encodeURIComponent(toSuggest),false,function(data){response(jQuery.map(data[1],function(item){return{label:item[0],value:jQuery.values(params).join('')+item[0]};}));});}else{response();}}});});}
this.filesize=function(bytes){var res;if((res=bytes/1073741824)>=1)return Math.floor(res)+'Gb';if((res=bytes/1048576)>=1)return Math.floor(res)+'Mb';if((res=bytes/1024)>=1)return Math.floor(res)+'Kb';return bytes+'bytes';}
this.imageUploaderLoading=false;this.imageUploader=function(conf,defecto,extra){var dep={'fileUploader':'https://miarroba.st/203/javascript/uploadbox/uploader.js','libImageCrop':'https://miarroba.st/203/javascript/lib.imagecrop.js','imageUploaderConf':'https://miarroba.st/203/javascript/es/imageuploaderconf.js'}
if($mia.imageUploaderLoading===true){return;}
var loading={};jQuery.each(dep,function(lib,path){if(typeof(window[lib])=='undefined'){loading[lib]=path;}});if(jQuery.keys(loading).length>0){$mia.imageUploaderLoading=true;jQuery.each(loading,function(lib,path){jQuery.getScript(path,function(){delete loading[lib];if(jQuery.keys(loading).length==0){$mia.imageUploaderLoading=false;$mia.imageUploader(conf,defecto,extra);}});});return;}
if(imageUploaderConf[conf]){var config=imageUploaderConf[conf];var froms={};jQuery.each(config['from'],function(k,v){froms[v]={'formUrl':'/b05e705195fc4e9cb3d0155b9152841e_uploader.php?accion='+conf}});froms['fromPc'].selected=true;if(typeof(defecto)!='undefined'&&defecto!==false&&defecto!=''){froms['fromDefecto']={'defaultCode':' <img src="'+defecto+'" /> ','defaultData':{}}}
var uploader=new fileUploader('dummyImageUploaderId',froms,((typeof(defecto)=='undefined'||defecto===false||defecto=='')?true:false),{'validExts':jQuery.keys(config['t']),'maxWeight':$mia.filesize(config['w'])||false,'maxWidth':config['Mw']||false,'minWidth':config['mw']||false,'maxHeight':config['Mh']||false,'minHeight':config['mh']||false,'noCloseWindow':true,'returnFunction':function(data){if(data&&data.url){if(config['cw']){$mia.lightBox.change('<div id="dummyImageUploaderCropper" style="width:640px;height:480px"></div>',true,function(){$mia.imageUploader(conf,defecto,extra)});new libImageCrop('#dummyImageUploaderCropper',data.url,640,480,config['cw'],config['ch'],function(crop){crop.path=data.url;jQuery.post(config['to'],jQuery.extend({action:'set'},extra,crop),function(data){if(jQuery.trim(data)!=''){jQuery.globalEval(data);}})
$mia.lightBox.close();});}else{jQuery.post(config['to'],jQuery.extend({action:'set'},extra),function(data){if(jQuery.trim(data)!=''){jQuery.globalEval(data);}})
$mia.lightBox.close();}}else{jQuery.post(config['to'],jQuery.extend({action:'delete'},extra),function(data,status){if(status=='success'){jQuery.globalEval(data);}})
$mia.lightBox.close();}}});}}
this.setCookie=function(name,val,expire,path,domain){var cookie=name+"="+escape(val);if(expire){var fecha=new Date();fecha.setTime(fecha.getTime()+(expire*1000));cookie+="; expires="+fecha.toGMTString();}
if(path){cookie+='; path='+path;}
if(domain){cookie+='; domain='+domain;}
document.cookie=cookie;}
this.dummyText=jQuery('<textarea />');this.fillInput=function(text){this.dummyText.html(text);return this.dummyText.get(0).value;}
this.debugLineCounter=1;this.debugBox=function(text){jQuery(function(){var debugBox=jQuery('#miaDebugBox');if(typeof debugBox.get(0)=='undefined'){debugBox=jQuery('<div id="miaDebugBox" style="position:absolute;top:0px;left:0px;background-color:#333333;border:2px solid #000000;color:#ffffff;width:400px;"><div  id="miaDebugBoxText" style="height:600px;overflow:auto;padding:5px;"></div><div  id="miaDebugBoxButtons" style="border-top:2px solid #000000;background-color:#ffffff;text-align:right;"><input type="button" value="limpiar" id="miaDebugBoxCleanButton" /><input type="button" value="cerrar" id="miaDebugBoxCloseButton" /></div></div>').appendTo('body');var foo=function(){debugBox.css('top',jQuery(document).scrollTop()+'px')};jQuery(document).scroll(foo);foo();jQuery('#miaDebugBoxCleanButton').click(function(){jQuery('#miaDebugBoxText').html('');$mia.debugLineCounter=1;});jQuery('#miaDebugBoxCloseButton').click(function(){debugBox.detach();delete debugBox;$mia.debugLineCounter=1;});}
jQuery('#miaDebugBoxText').prepend(($mia.debugLineCounter++)+'º. '+text+'<hr />');});}
this.numberFormat=function(nStr,dec){if(typeof(dec)=='undefined')dec=0;nStr=parseFloat(nStr);nStr=nStr.toFixed(dec);nStr+='';x=nStr.split('.');x1=x[0];x2=x.length>1?_C_DECIMALES+x[1]:'';var rgx=/(\d+)(\d{3})/;while(rgx.test(x1)){x1=x1.replace(rgx,'$1'+_C_MILES+'$2');}
return x1+x2;}
this.selectFont=function(value,fn){$mia.lightBox.change(jQuery('<iframe src="about:blank" scrolling="no" frameborder="0" width="550" height="350"></iframe>').one('load',function(){var tt=this;var de=tt.contentWindow.document;de.open();de.write('<!doctype html><html><head>'
+'<script type="text/javascript" src="'+_JQ_URL+'"></script>'
+'<script type="text/javascript" src="'+_JS_LNG_URL+'/fonts.js"></script>'
+'<script type="text/javascript" src="'+_JS_LNG_URL+'/miarroba.js"></script>'
+'<script id="pickerOpts" type="text/javascript" src="'+_JS_URL+'/fontpicker/popup'+_JS_ORIG+'.js">{"default":"'+value+'"}</script>'
+'<link href="'+_CSS_URL+'/fontpicker'+_JS_ORIG+'.css" rel="stylesheet" type="text/css" />'
+'</head><body></body></html>');de.close();tt.contentWindow.returnFN=function(value,fontURL){jQuery(document).off('keydown.fontselector');$mia.lightBox.close(false);fn(value,fontURL);}
jQuery(document).off('keydown.fontselector').on('keydown.fontselector',function(e){return tt.contentWindow.keyEvent(e);});}),true,function(){jQuery(document).off('keydown.fontselector');$mia.lightBox.close(false);});}
this.inputFontSelector=function(sel){var applyFont=function(o,f){if(jQuery.inArray(f,_SAFE_FONTS)===-1){jQuery('link#wf_'+jQuery(o).identify()).attr('href','https://fonts.googleapis.com/css?family='+f);}
jQuery(o).val(f).css('fontFamily',f).attr('readonly','readonly').change();}
jQuery(sel).addClass('fontSelector').click(function(e){var iT=this;$mia.selectFont(iT.value,function(f){applyFont(iT,f);});e.preventDefault();return false;}).mousedown(function(e){e.preventDefault();return false;}).each(function(){jQuery('head').append('<link id="wf_'+jQuery(this).identify()+'" rel="stylesheet" type="text/css" />');applyFont(this,this.value);})}
this.slider=function(sel){if(jQuery.isReady){jQuery(sel).filter('select').each(function(){var o=jQuery(this).hide(),c=jQuery('option',o),m,n,s;m=jQuery('<span/>').addClass('sliderblock').insertAfter(o);n=jQuery('<input type="text"/>').addClass('tabla_input').css({width:o.width()-20}).val(o.val()).appendTo(m).change(function(){o.val($(this).val());s.slider({value:o.val()});});m.css('padding-left',n.outerWidth());var mm=jQuery('<span/>').addClass('sliderbarblock').appendTo(m);var l=jQuery('<img class="slider sLeft" src="'+_VACIO_URL+'"/>').appendTo(mm);s=jQuery('<span/>').addClass('sliderbar').css({minWidth:100}).slider({min:0,max:(c.length-1),step:1,value:c.filter('[selected]').prevAll().length,slide:function(e,ui){n.html(c.eq(ui.value).html());},change:function(e,ui){o.val(c.eq(ui.value).attr('value')).change();n.val(o.val());}}).appendTo(mm);var r=jQuery('<img class="slider sRight" src="'+_VACIO_URL+'"/>').appendTo(mm);$([r,l]).mousehold(function(e){$mia.moveSlider(s,(jQuery(this).hasClass('sLeft')?-1:1));e.preventDefault();});});}else{jQuery(function(){t.slider(sel)});}}
this.moveSlider=function(s,n){var v=(s.slider('option','value')+n);if(v>=s.slider('option','min')&&v<=s.slider('option','max')){s.slider({value:v});}}
this.dateFormat=new function(){var t=this;t.parse=function(d,format){return String(format).replace(/(\\*)([YymndjGgHhiswNlDSFMtzLaAuUZTecrOPWoQq]?)/g,function(o,a,b){ret='';if(a.length%2==0){ret+=a.replace(/(\\){2}/g,'\\');if(b!=''){ret+=t.mask[b](d);}}else{ret+=a.substr(0,(a.length-1)).replace(/(\\){2}/g,'\\')+b}
return ret;});}
t.days=['Domingo','Lunes','Martes','Miércoles','Jueves','Viernes','Sábado'];t.months=['Enero','Febrero','Marzo','Abril','Mayo','Junio','Julio','Agosto','Septiembre','Octubre','Noviembre','Diciembre'];t.mask={Y:function(d){return d.getFullYear()},y:function(d){return String(t.mask['Y'](d)).substr(2,2)},m:function(d){return jQuery.strPad(t.mask['n'](d))},n:function(d){return d.getMonth()+1},d:function(d){return jQuery.strPad(t.mask['j'](d))},j:function(d){return d.getDate()},G:function(d){return d.getHours()},g:function(d){var h=d.getHours();return(h==0?12:(h>12)?h-12:h)},H:function(d){return jQuery.strPad(t.mask['G'](d))},h:function(d){return jQuery.strPad(t.mask['g'](d))},i:function(d){return jQuery.strPad(d.getMinutes())},s:function(d){return jQuery.strPad(d.getSeconds())},w:function(d){return d.getDay()},N:function(d){return(d.getDay()||7)},l:function(d){return t.days[t.mask['w'](d)];},D:function(d){return t.mask['l'](d).substr(0,3)},S:function(d){return((['st','nd','rd'])[d.getDate()-1]||'th');},F:function(d){return t.months[(t.mask['n'](d)-1)];},M:function(d){return t.mask['F'](d).substr(0,3)},t:function(d){return(new Date(d.getFullYear(),(d.getMonth()+1),0)).getDate()},z:function(d){return Math.floor((d.getTime()-(new Date(d.getFullYear(),0,1,0,0,0,0)).getTime())/86400000)},L:function(d){return(new Date(d.getFullYear(),2,0)).getDate()==29?1:0},a:function(d){return(d.getHours()<12)?'am':'pm';},A:function(d){return t.mask['a'](d).toUpperCase()},u:function(d){return d.getMilliseconds();},U:function(d){return Math.floor(d.getTime()/1000);},Z:function(d){return d.getTimezoneOffset();},T:function(d){return 'GMT';},e:function(d){return 'GMT';},c:function(d){return d.format('Y-m-d\\TH:i:sP');},r:function(d){return d.format('D, j M Y H:i:s O');},O:function(d){return t.mask['P'](d,true)},P:function(d,nocolon){var Z=t.mask['Z'](d),r=(Z>0?'-':'+'),z=Math.abs(Z),h=Math.floor(z/60);return(Z>0?'-':'+')+jQuery.strPad(h)+(nocolon?'':':')+jQuery.strPad(z-(h*60));},W:function(d){var N=parseInt((new Date(d.getFullYear(),0,1)).format('N')),z=parseInt(d.format('z'))+1;var week=Math.floor((z+N-1)/7);if(N<5){week++;}
if(week<=1&&N>=5){week=(new Date(d.getFullYear()-1,11,31)).format('W');}else if(week>52){week=parseInt((new Date(d.getFullYear()+1,0,1)).format('N'))<5?1:53;}
return jQuery.strPad(week);},o:function(d){var n=t.mask['W'](d),y=d.getFullYear(),m=d.getMonth();if(n==1&&m!=0){y++;}else if(m==0&&n>5){y--;}
return y;},Q:function(d){return t.mask['W'](new Date(d.getFullYear(),d.getMonth(),d.getDate()+1))},q:function(d){return t.mask['o'](new Date(d.getFullYear(),d.getMonth(),d.getDate()+1))}}
Date.prototype.format=function(m){try{return t.parse(this,m);}catch(e){return '';}}};}
function spoiler(obj){obj=jQuery(obj);var content=obj.parent().next();if(content.length==1){if(content.hasClass('mia_spoiler')){content.removeClass('mia_spoiler').addClass('mia_spoiler_visible');obj.val('Ocultar');}else{content.removeClass('mia_spoiler_visible').addClass('mia_spoiler');obj.val('Mostrar');}}}
function selectAll(obj){var content=obj.parentNode.nextSibling;if(content){if(document.selection){var range=document.body.createTextRange();range.moveToElementText(content);range.select();}else if(window.getSelection){var range=document.createRange();range.selectNode(content);window.getSelection().addRange(range);}}}
var share_window_open=function(link,open){open=open.split('|');if(open[0]=='popup'){window.open(link.href,link.target+'popup',open[1]);return false;}else{return true;}}
var share_window_more=function(link){return aux_share_window_iframe(link,400,260);}
var share_window_iframe_open=function(link,open){setTimeout(function(){$mia.lightBox.close()},100);return share_window_open(link,open);}
var share_window_iframe_more=function(link){return aux_share_window_iframe(link,400,260);}
var aux_share_window_iframe=function(link,width,height){var share_iframe='share_iframe_'+Math.floor(Math.random()*1001);$mia.lightBox.change('<div style="width:'+width+'px;height:'+height+'px;" ><iframe src="about:blank" name="'+share_iframe+'" id="'+share_iframe+'" AllowTransparency="1" frameborder="0" marginheight="0" marginwidth="0" scrolling="0" style="background:none;border:none;margin:0px;padding:0px;overflow:hidden;position:static;display:block;height:'+height+'px;width:'+width+'px;"></iframe></div>');var onJSONPLoad=function(){}
link=link.href.split('?');jQuery.ajax({url:link[0],crossDomain:true,data:link[1],dataType:'jsonp',success:function(r){window[share_iframe].document.write(r.code);window[share_iframe].document.close();}});return false;}